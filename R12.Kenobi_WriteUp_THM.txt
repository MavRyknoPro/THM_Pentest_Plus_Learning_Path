Task 1: Deploy the vulnerable machine

[*] This room will cover accessing a Samba share, manipulating a vulnerable version of proftpd to gain initial access and escalate your privileges to root via an SUID binary.

[Question 1]: Make sure you're connected to our network and deploy the machine

    [!] Answer: No answer needed 

[Question 2]: Scan the machine with nmap, how many ports are open?

    [+] nmap -A -sV <Ip of VM>

    [!] Answer: 7

*****************************************************************************************************************************************

Task 2: Enumerating Samba for shares

[Question 1]: Using the nmap command above, how many shares have been found?

    [+] nmap -p 445 --script=smb-enum-shares.nse,smb-enum-users.nse <Ip of VM>

    [!] Answer: 3

[Question 2]: Once you're connected, list the files on the share. What is the file can you see?

    [+] smbclient //<ip of VM>/anonymous

[Question 3]: Once you're connected, list the files on the share. What is the file can you see?

    [!] Answer: log.txt 

[Question 4]: What port is FTP running on?

    [!] Answer: 21

[Question 5]: What mount can we see?

    [+] nmap -p 111 --script=nfs-ls,nfs-statfs,nfs-showmount <Ip of VM>

    [!] Answer: /var 

*****************************************************************************************************************************************

Task 3: Gain initial access with ProFtpd

[*] ProFtpd is a free and open-source FTP server, compatible with Unix and Windows systems. Its also been vulnerable in the past software versions.

[Question 1]: What is the version?

    [!] Answer: 1.3.5

[Question 2]: How many exploits are there for the ProFTPd running?

    [+] Searchsploit is basically just a command line search tool for exploit-db.com.

    [!] Answer: 4

[Question 3]: What is Kenobi's user flag (/home/kenobi/user.txt)?

    [+] nc <ip of vm>

    [+] sudo mkdir /mnt/kenobiNFS

    [+] mount <ip of vm>:/var /mnt/kenobiNFS

    [+] ls -la /mnt/kenobiNFS

    [+] cp  /mnt/kenobiNFS/tmp/id_rsa

    [+] chmod 600 id_rsa 

    [+] cat user.txt 

    [!] Answer: d0b0f3f53b6caa532a83915e19224899

*****************************************************************************************************************************************

Task 4: Privilege Escalation with Path Variable Manipulation

[*] You must to have knowledge about permission in Linux 

    [+] Read this task and understand about SUID 

[Question 1]: What file looks particularly out of the ordinary? 

    [!] Answer: /usr/bin/menu

[Question 2]: Run the binary, how many options appear?

    [+] /usr/bin/menu

    [!] Answer: 3

[Question 4]: What is the root flag (/root/root.txt)?

    [+] strings /usr/bin/menu 

    [+] So taking advantage of this we copy the /bin/sh shell and call it to curl, change the permission of the file and export our path to the menu file directory which we saw previously

    [+] So now as we run the previous binary again we gain root access as shown above.

    [!] Answer: 177b3cd8562289f37382721c28381f02

    
























